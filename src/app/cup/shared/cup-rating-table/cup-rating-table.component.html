<app-error *ngIf="errorCupRating" [message]="errorCupRating"></app-error>
<div *ngIf="cupRating" class="card">
   <div class="table-responsive shadow">
      <table class="table table-striped table-bordered table-hover table-sm m-0">
         <thead class="thead-dark">
            <tr>
               <th class="text-center align-middle">№</th>
               <th class="text-center align-middle" title="Улюблена команда"><i class="fa fa-shield" aria-hidden="true"></i><br /></th>
               <th title="Ім'я гравця" class="align-middle">Ім'я</th>
               <th class="text-center">
                  {{ beforePreviousSeason ? beforePreviousSeason.title : '' }}
                  <small class="text-muted text-nowrap">(Рейтинг * {{ cupRating[0].before_previous_coefficient }})</small>
               </th>
               <th class="text-center">
                  {{ previousSeason ? previousSeason.title : '' }}
                  <small class="text-muted text-nowrap">(Рейтинг * {{ cupRating[0].previous_coefficient }})</small>
               </th>
               <th class="text-center">
                  {{ activeSeason ? activeSeason.title : '' }}
                  <small class="text-muted text-nowrap">(Рейтинг * {{ cupRating[0].active_coefficient }})</small>
               </th>
               <th title="Сума очок за три сезони" class="text-center align-middle">Сума</th>
            </tr>
         </thead>
         <tbody>
            <tr
               *ngFor="let cupRatingItem of cupRating; let i = index"
               class="cursor-pointer"
               [ngClass]="{ 'table-active': authenticatedUser && cupRatingItem.user_id === authenticatedUser.id }"
               [routerLink]="cupRatingItem.user_id"
            >
               <th scope="row" class="text-center">{{ i + 1 }}.</th>
               <td class="text-center p-1">
                  <app-club-logo-with-tooltip *ngIf="cupRatingItem.user?.main_club?.length" [club]="cupRatingItem.user?.main_club[0]">
                  </app-club-logo-with-tooltip>
               </td>
               <td>
                  <strong>{{ cupRatingItem.user.name }}</strong>
                  {{ cupRatingItem.user.hometown ? '(' + cupRatingItem.user.hometown + ')' : '' }}
               </td>
               <td class="text-center text-muted" [ngClass]="{ 'table-danger': !cupRatingItem.before_previous_season_points }">
                  <small>{{ cupRatingItem.before_previous_season_points }}</small>
               </td>
               <td class="text-center text-muted" [ngClass]="{ 'table-danger': !cupRatingItem.previous_season_points }">
                  <small>{{ cupRatingItem.previous_season_points }}</small>
               </td>
               <td class="text-center text-muted" [ngClass]="{ 'table-danger': !cupRatingItem.active_season_points }">
                  <small>{{ cupRatingItem.active_season_points }}</small>
               </td>
               <td class="text-center">
                  <strong>{{ cupRatingItem.points_summary }}</strong>
               </td>
            </tr>
         </tbody>
      </table>
   </div>
</div>
