<div *ngIf="cupRatingGroup">
   <table class="d-none d-lg-table table table-striped table-bordered shadow mb-0">
      <thead class="thead-dark">
         <tr>
            <th scope="col" class="text-center align-middle">№</th>
            <th scope="col" title="Ім'я Гравця" class="align-middle">Гравець</th>
            <th scope="col" class="text-center align-middle" title="Кількість ігор">І</th>
            <th scope="col" class="text-center align-middle" title="Виграші">В</th>
            <th scope="col" class="text-center align-middle" title="Нічиї">Н</th>
            <th scope="col" class="text-center align-middle" title="Програші">П</th>
            <th scope="col" class="text-center align-middle" title="Забиті і Пропущені голи">З:П</th>
            <th scope="col" class="text-center align-middle" title="Очки">О</th>
            <th scope="col" class="text-center align-middle" title="Додаткові показники">О/КС</th>
         </tr>
      </thead>
      <tbody>
         <tr
            *ngFor="let cupRatingGroupItem of cupRatingGroup; let i = index"
            [ngClass]="{
               'table-primary': showPositionHighlight(i, 'promotion'),
               'table-info': showPositionHighlight(i, 'possible_promotion'),
               'table-secondary': showPositionHighlight(i, 'other_competition')
            }"
         >
            <th scope="row" class="text-center align-middle">{{ i + 1 }}.</th>
            <td>
               <ng-container [ngTemplateOutlet]="userInfo" [ngTemplateOutletContext]="{ item: cupRatingGroupItem }"></ng-container>
            </td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win + cupRatingGroupItem.draw + cupRatingGroupItem.loss }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.draw }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.loss }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.scored }}:{{ cupRatingGroupItem.missed }}</td>
            <td class="text-center align-middle">
               <strong>{{ cupRatingGroupItem.points }}</strong>
            </td>
            <td class="text-center align-middle">
               <small class="text-muted text-nowrap">{{ cupRatingGroupItem.points_sum }} / {{ cupRatingGroupItem.dc_sum }}</small>
            </td>
         </tr>
      </tbody>
   </table>

   <table class="d-none d-sm-table d-lg-none table table-striped table-bordered shadow mb-0">
      <thead class="thead-dark">
         <tr>
            <th scope="col" class="text-center align-middle">№</th>
            <th scope="col" title="Ім'я Гравця" class="align-middle">Гравець</th>
            <th scope="col" class="text-center align-middle" title="Кількість ігор">І</th>
            <th scope="col" class="text-center align-middle" title="Виграші">В</th>
            <th scope="col" class="text-center align-middle" title="Нічиї">Н</th>
            <th scope="col" class="text-center align-middle" title="Програші">П</th>
            <th scope="col" class="text-center align-middle" title="Забиті і Пропущені голи">З:П</th>
            <th scope="col" class="text-center align-middle" title="Очки">О</th>
         </tr>
      </thead>
      <tbody>
         <tr *ngFor="let cupRatingGroupItem of cupRatingGroup; let i = index">
            <th scope="row" class="text-center align-middle">{{ i + 1 }}.</th>
            <td>
               <ng-container [ngTemplateOutlet]="userInfo" [ngTemplateOutletContext]="{ item: cupRatingGroupItem }"></ng-container>
            </td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win + cupRatingGroupItem.draw + cupRatingGroupItem.loss }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.draw }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.loss }}</td>
         </tr>
      </tbody>
   </table>

   <table class="d-table d-sm-none table table-sm table-striped table-bordered shadow mb-0">
      <thead class="thead-dark">
         <tr>
            <th scope="col" class="text-center align-middle">№</th>
            <th scope="col" title="Ім'я Гравця" class="align-middle">Гравець</th>
            <th scope="col" class="text-center align-middle" title="Кількість ігор">І</th>
            <th scope="col" class="text-center align-middle" title="Виграші">В</th>
            <th scope="col" class="text-center align-middle" title="Нічиї">Н</th>
            <th scope="col" class="text-center align-middle" title="Програші">П</th>
         </tr>
      </thead>
      <tbody>
         <tr *ngFor="let cupRatingGroupItem of cupRatingGroup; let i = index">
            <th scope="row" class="text-center align-middle">{{ i + 1 }}.</th>
            <td>
               <ng-container [ngTemplateOutlet]="userInfo" [ngTemplateOutletContext]="{ item: cupRatingGroupItem }"></ng-container>
            </td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win + cupRatingGroupItem.draw + cupRatingGroupItem.loss }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.win }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.draw }}</td>
            <td class="text-center align-middle">{{ cupRatingGroupItem.loss }}</td>
         </tr>
      </tbody>
   </table>
</div>

<ng-template #userInfo let-item="item">
   <div class="d-flex flex-row align-items-center">
      <app-user-logo [user]="item.user"></app-user-logo>
      <div class="ml-1 d-flex flex-column">
         <strong>{{ item.user.name }}</strong>
         <small class="text-muted break-word">{{ getHomeCityInBrackets(item.user.hometown) }}</small>
      </div>
   </div>
</ng-template>
